<!DOCTYPE html>
<html>
<head>
    <title>Test Change Password - GameHub</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; }
        .test-section { background: #f8f9fa; padding: 20px; margin: 20px 0; border-radius: 8px; }
        .success { color: #28a745; }
        .error { color: #dc3545; }
        input, button { padding: 8px 12px; margin: 5px; }
        button { background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>üîê Change Password Test</h1>
    
    <div class="test-section">
        <h3>Test Admin Password Change</h3>
        <p><strong>Current Admin Password:</strong> admin123</p>
        <input type="password" id="testCurrentPwd" placeholder="Current Password" value="admin123">
        <input type="password" id="testNewPwd" placeholder="New Password" value="newpass123">
        <button onclick="testAdminPasswordChange()">Test Admin Change</button>
        <div id="adminResult"></div>
    </div>

    <div class="test-section">
        <h3>Test Customer Password Change</h3>
        <p><strong>Current Customer Password:</strong> customer123</p>
        <input type="password" id="testCustomerCurrentPwd" placeholder="Current Password" value="customer123">
        <input type="password" id="testCustomerNewPwd" placeholder="New Password" value="newcustomerpass">
        <button onclick="testCustomerPasswordChange()">Test Customer Change</button>
        <div id="customerResult"></div>
    </div>

    <script>
        async function testAdminPasswordChange() {
            const resultDiv = document.getElementById('adminResult');
            resultDiv.innerHTML = 'Testing...';
            
            try {
                const response = await fetch('api/change_password.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        userId: 3, // Admin user ID
                        currentPassword: document.getElementById('testCurrentPwd').value,
                        newPassword: document.getElementById('testNewPwd').value
                    })
                });
                
                const data = await response.json();
                resultDiv.innerHTML = data.success ? 
                    `<div class="success">‚úÖ ${data.message}</div>` : 
                    `<div class="error">‚ùå ${data.message}</div>`;
            } catch (error) {
                resultDiv.innerHTML = `<div class="error">‚ùå Error: ${error.message}</div>`;
            }
        }

        async function testCustomerPasswordChange() {
            const resultDiv = document.getElementById('customerResult');
            resultDiv.innerHTML = 'Testing...';
            
            try {
                const response = await fetch('api/change_password.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        userId: 4, // Customer user ID
                        currentPassword: document.getElementById('testCustomerCurrentPwd').value,
                        newPassword: document.getElementById('testCustomerNewPwd').value
                    })
                });
                
                const data = await response.json();
                resultDiv.innerHTML = data.success ? 
                    `<div class="success">‚úÖ ${data.message}</div>` : 
                    `<div class="error">‚ùå ${data.message}</div>`;
            } catch (error) {
                resultDiv.innerHTML = `<div class="error">‚ùå Error: ${error.message}</div>`;
            }
        }
    </script>
</body>
</html>
